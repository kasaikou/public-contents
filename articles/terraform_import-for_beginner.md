---
title: 未知のサービスに対するTerraform初心者アプローチ
emoji: 🛵
type: tech
topics: [terraform, AWS]
published: false
---

# 私を含めた最初からTerraformを使おうとして挫折した方々，いかがお過ごしでしょうか
この記事では，Terraformで未知のリソースを定義しようと思ったときに私がしていることを紹介しています．読者対象としては「Terraformを導入したはいいけれど，リソースの定義方法がわからないまま挫折して自然消滅させた方」を対象としています．まあ，Terraformの公式ドキュメントを読んでわかる人は直接の対象ではありませんが，「こういう人もいるんだな」くらいで見ていただければ幸いです．

口を大にして言いますが，この記事の合言葉は **「公式ドキュメントを読んでわかるならそれに越したことはない」** です．そのうえで，公式ドキュメントを読んでわからなかった人が，Terraformを利用するるための足がかりをこの記事ではECS on Fargateのサービス作成とS3バケットの作成を例に挙げながら提案していきます．

Repeat after me, **「公式ドキュメントを読んでわかるならそれに越したことはない」**

# TL;DR
- 最初からTerraformを使うだなんて，そんな無理をする必要はないんだよ
    - 一度マネジメントコンソールでリソースを作ったらいいんだよ
- `terraform import` を用いることで，すでにあるリソースを取り込むことができるよ
- `terraform plan` を用いることで，リソースの状態と `.tf` ファイルで定義している内容を比較することができるよ
    - 差がなくなるように調整することでリソースを再現することができるね
- この方法によって作成されるリソースは完全に再現しているとは言えないよ
    - Terraform で定義したファイルからリソースを作成して，ちゃんとチェックする必要があるね

# 最初からTerraformを使うだなんて，そんな無理をする必要はないんだよ
TL;DRでも基本方針は示しましたが，改めて，今回の方法について全体像を確認します．

---
基本的に， **公式ドキュメントを読んでわかるならそれに越したことはない** です．Terraform の公式ドキュメントはサンプル付きで比較的読みやすいドキュメントであるため，それをそのまま利用したとしても，かなり期待に添えたものをつくることができるでしょう．しかし，そのインフラリソースに対する知識が必要なものや，複数のリソースを作成しなければいけないものなど，一筋縄ではいかないものもかなりあります．これらを何も知らない状態からTerraformだけで定義するのは至難の業です．そこで，最初からTerraformを使わずに一度マネジメントコンソールでリソースを作成します．その後， `terraform import` でリソースをTerraformプロジェクトに取り込み，`terraform plan` で差分を比較しながらプロジェクトを編集していくのです．

一度，マネジメントコンソールでプロジェクトにリソースを定義することで複雑なリソースをテンプレート的に起動させ， `terraform import` を用いてTerraformプロジェクトにリソースを取り込むことで，マネジメントコンソールで作製した場合のリソースをTerraformに取り込むことができます．これを `terraform plan` することで，定義されたリソースと現在のリソースとの差分を得られるので，この差分がなくなるように修正していきます．

## 一度マネジメントコンソールでリソースを作る

## `terraform import` & `terraform plan`

# この方法は完ぺきではない

## 検証を行う
