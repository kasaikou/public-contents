---
title: Docker vs Anaconda
---

# Anacondaに対する個人的な感想とDocker環境スコれの会

ところで，私の予想ではこの記事をお読みの方は大きく分けて2種類の人がいると思っています．Docker (Compose)を学びに来た人とJupyterLab環境の構築を学びに来た人です．基本的には前者の話をしていくのですが，この回だけは後者の話をさせてください．

機械学習を行う方にとって，仮想環境というとAnaconda環境あるいはvenv環境の事を考えるかもしれませんが，今回はDockerコンテナを用いて構築していきたいと思います．

理由は主に以下の3点です．

## GUIでがっちり整えており，却って管理がしにくい
確かに，最初のうちはGUIで管理していた方が楽で扱いやすいのは間違いありません．

しかし，段々と仮想環境が大きくなっていったときに「何をインストールしたのか」「何と何が競合しているのか」などといったことを調べるのにはGUIで見るよりもDockerfileで全部書き出されたものを追う方がシンプルかつ明瞭です（個人の感想です）．

## 本当にデータ分析にだけ特化しているので他の使い道がない
Anaconda環境はPythonやそれを囲うように付属する部分でできているために，機械学習以外のを目的では使いにくいという事です．また，Anaconda特有のインストール方法などがあり，ノウハウを他で応用することは難しいでしょう．

それに対して，DockerはLinux環境を構築するノウハウをそのまま流用することが可能です．また，コンテナという形で多くのサーバーで用いられているのでバックエンドを構築する際や，機械学習に限らずコンテナで開発環境を構築することもできます．

## Pythonの仮想環境は本当の意味での仮想環境じゃない
venvやAnacondaといったPythonの仮想環境はあくまでも「Pythonの」仮想環境であるため，ローカルのファイルシステムや環境変数に依存します．

それに対してDockerで構築したコンテナ環境はDockerfileやdocker-compose.ymlで定義した環境変数しか出てきませんし，ファイルシステムもLinuxのものに統一されます．これが環境を共通化させていくうえでとても重要なのです．

# もちろんデメリットはある
Docker環境で構築する際のデメリットを見ましょう．大きく分けて二つあります．

## メモリリソースを食う
結局のところ，AnacondaがPythonを動かしているのに比べると，Dockerコンテナ内ではOSを動かしているも同然の状態なので，より多くのリソースを食います．本来Dockerのベストプラクティスではイメージサイズでは

その中でも特に顕著なのがRAMメモリです．私の体感では，RAMメモリが16GBでは少し心もとなさを感じる（もちろん動く）くらい消費します．

## GPUを動かすことができる条件が限られる
機械学習を行うのであれば，GPUが使える環境にしたいところですが，Docker内でGPUをLinux，Windows10 21H2以降, Windows11だけです．

なので，機械学習用のDockerコンテナはどこでもコンテナとして使用することはできるものの，デバイスを選ぶ不思議なコンテナになります．

:::message
もちろん，CPUだけで十分である場合はこれに該当しません．
:::

これらのデメリットを考慮したうえで次回から始まる環境構築を読んでください．